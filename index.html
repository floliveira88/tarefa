<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>To Do List Simples</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 400px; margin: 20px auto; }
  h1 { text-align: center; }
  input[type="text"] { width: 80%; padding: 8px; }
  button { padding: 8px 12px; margin-left: 5px; }
  ul { list-style: none; padding-left: 0; }
  li { display: flex; align-items: center; margin: 8px 0; }
  li input[type="checkbox"] { margin-right: 10px; }
  li.completed { text-decoration: line-through; color: gray; }
  .buttons { margin-top: 15px; text-align: center; }
</style>
</head>
<body>

<h1>To Do List</h1>

<div>
  <input id="taskInput" type="text" placeholder="Nova tarefa" />
  <button onclick="addTask()">Adicionar</button>
</div>

<ul id="taskList"></ul>

<div class="buttons">
  <button onclick="clearTasks()">Limpar Lista</button>
  <button onclick="downloadPDF()">Baixar PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const taskInput = document.getElementById('taskInput');
  const taskList = document.getElementById('taskList');

  // Carrega as tarefas do localStorage
  function loadTasks() {
    const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
    taskList.innerHTML = '';
    tasks.forEach(({ text, done }) => {
      addTaskToDOM(text, done);
    });
  }

  // Salva as tarefas no localStorage
  function saveTasks() {
    const tasks = [];
    taskList.querySelectorAll('li').forEach(li => {
      tasks.push({
        text: li.querySelector('label').innerText,
        done: li.querySelector('input[type="checkbox"]').checked
      });
    });
    localStorage.setItem('tasks', JSON.stringify(tasks));
  }

  // Adiciona tarefa ao DOM
  function addTaskToDOM(text, done = false) {
    const li = document.createElement('li');
    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.checked = done;
    checkbox.addEventListener('change', () => {
      li.classList.toggle('completed', checkbox.checked);
      saveTasks();
    });

    const label = document.createElement('label');
    label.textContent = text;

    li.appendChild(checkbox);
    li.appendChild(label);
    li.classList.toggle('completed', done);
    taskList.appendChild(li);
  }

  // Adiciona nova tarefa
  function addTask() {
    const text = taskInput.value.trim();
    if (text === '') return alert('Digite uma tarefa!');
    addTaskToDOM(text);
    saveTasks();
    taskInput.value = '';
    taskInput.focus();
  }

  // Limpar todas as tarefas
  function clearTasks() {
    if (confirm('Deseja limpar toda a lista?')) {
      taskList.innerHTML = '';
      saveTasks();
    }
  }

  // Baixar lista em PDF
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text('Minha To Do List', 14, 20);

    const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
    doc.setFontSize(12);
    let y = 30;

    if (tasks.length === 0) {
      doc.text('Nenhuma tarefa na lista.', 14, y);
    } else {
      tasks.forEach(({ text, done }, i) => {
        const status = done ? '[x]' : '[ ]';
        doc.text(`${status} ${text}`, 14, y);
        y += 10;
        if (y > 280) {  // Quebra de pÃ¡gina simples
          doc.addPage();
          y = 20;
        }
      });
    }

    doc.save('todo-list.pdf');
  }

  // Inicializa
  loadTasks();

  // Permite adicionar tarefa apertando Enter
  taskInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') addTask();
  });
</script>

</body>
</html>

